<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contributor Guide &#8212; Pangeo Gallery  documentation</title>
    <link rel="stylesheet" href="_static/pangeo-style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/font-awesome/5.0.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/pangeo-gallery.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gallery for CESM LENS on AWS" href="repos/NCAR/cesm-lens-aws/index.html" />
    <link rel="prev" title="Pangeo Gallery" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>
<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">
          <span><img src="_static/small_e_reversed_24px.png"></span>
        Pangeo Gallery</a>
    </div>

    <div class="collapse navbar-collapse nav-collapse">
      <ul class="nav navbar-nav">
      <li>
      <nav id="pangeo-breadcrumb" aria-label="breadcrumb">
        <ol class="breadcrumb">
        
          <li class="breadcrumb-item active"><a href="#">Contributor Guide</a></li>
        
        </ol>
      </nav>
      </li>
      </ul>
    </div>

  </div>
</div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="contributor-guide">
<h1>Contributor Guide<a class="headerlink" href="#contributor-guide" title="Permalink to this headline">¶</a></h1>
<p>The site is organized into galleries, each containing one or more notebooks.
Each gallery is stored in a standalone GitHub repository.
All notebooks within a gallery should share a similar theme
(for example, <em>Pangeo for Physical Oceanography</em>) and must use the same
Conda environment.</p>
<p>Galleries are “built” using <a class="reference external" href="https://github.com/pangeo-gallery/binderbot">binderbot</a>.
Binderbot takes all the notebooks in the gallery, executes them inside binder,
and saves the output to a dedicated branch within the repo.
Each gallery contains a configuration file called <code class="docutils literal notranslate"><span class="pre">binder-gallery.yaml</span></code>,
which specifies the details of the binder configuration.
It also provides a basic description of the gallery contents.</p>
<div class="section" id="contributing-to-an-existing-gallery">
<h2>Contributing to an Existing Gallery<a class="headerlink" href="#contributing-to-an-existing-gallery" title="Permalink to this headline">¶</a></h2>
<p>You can contribute to an existing gallery by either modifying one of the
existing notebooks or adding a new notebook.
Since every gallery is a GitHub repository, you can contribute by
<a class="reference external" href="https://opensource.com/article/19/7/create-pull-request-github">making a pull request</a>.</p>
</div>
<div class="section" id="creating-a-new-gallery">
<h2>Creating a New Gallery<a class="headerlink" href="#creating-a-new-gallery" title="Permalink to this headline">¶</a></h2>
<p>To create a new gallery, you will need to create a new repo following the
<a class="reference external" href="https://github.com/pangeo-gallery/example-gallery">example gallery template</a>.</p>
<ul class="simple">
<li><p>Click the big green button to create a new repository following the template.</p></li>
<li><p>Remove the dummy content and add your content.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">binder-gallery.yaml</span></code> configuration file.</p></li>
<li><p>Add a custom <code class="docutils literal notranslate"><span class="pre">thumbnail.png</span></code>, a 200 x 200 px image which represents the gallery contents.</p></li>
</ul>
<p>Now push your changes, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span>
</pre></div>
</div>
<p>At this point, a GitHub Action will execute your notebooks on the binder.
Click the “Actions” button on your repository page or navigate to <code class="docutils literal notranslate"><span class="pre">/actions</span></code>,
and wait for the build to finish. The build may fail to complete before the repo is
added as a submodule to <code class="docutils literal notranslate"><span class="pre">pangeo-gallery</span></code>. Once you set that up below, you can click
the most recent failed “Binderbot Build” in the Actions list, click “Binderbot Build”
in the left sidebar, then click “Re-run jobs” in near the top right of the page. This
will run the GitHub Action again. Alternatively, you can push another commit to your
notebook content and the action should automatically run again.</p>
<p>You also need to add your repo as a submodule to the Pangeo gallery repo, located at
<a class="reference external" href="https://github.com/pangeo-gallery/pangeo-gallery">https://github.com/pangeo-gallery/pangeo-gallery</a>. There are two ways to do this.</p>
<ol class="arabic simple">
<li><p>Add a submodule via git and do the work yourself</p></li>
<li><p>Add a submodule via a GitHub issue and let the CI system do the work</p></li>
</ol>
<div class="section" id="add-a-submodule-via-git">
<h3>Add a submodule via git<a class="headerlink" href="#add-a-submodule-via-git" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Fork the gallery repo.</p></li>
<li><p>Clone your fork.</p></li>
<li><p>Create a feature branch.</p></li>
<li><p>Add your repository as a submodule, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">add</span> <span class="o">-</span><span class="n">b</span> <span class="n">binderbot</span><span class="o">-</span><span class="n">built</span> \
<span class="s2">&quot;https://github.com/pangeo-gallery/example-gallery.git&quot;</span> \
<span class="n">repos</span><span class="o">/</span><span class="n">pangeo</span><span class="o">-</span><span class="n">gallery</span><span class="o">/</span><span class="n">example</span><span class="o">-</span><span class="n">gallery</span>
</pre></div>
</div>
</li>
<li><p>Commit and make a PR to the upstream gallery repo.</p></li>
</ul>
</div>
<div class="section" id="add-a-submodule-via-a-github-issue">
<h3>Add a submodule via a GitHub issue<a class="headerlink" href="#add-a-submodule-via-a-github-issue" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Go to the <a class="reference external" href="https://github.com/pangeo-gallery/pangeo-gallery">pangeo-gallery repo</a></p></li>
<li><p>Go to the Issues section and make a new issue</p></li>
<li><p>The only text in the issue comment should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">add</span><span class="o">-</span><span class="n">submodule</span> <span class="o">&lt;</span><span class="n">binder_repo</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&lt;binder_repo&gt;</span></code> will match the entry in the <code class="docutils literal notranslate"><span class="pre">binder-gallery.yaml</span></code> file described below.</p>
<p>Sometimes, the GitHub Action to add your repo as a submodule will fail. We can work with
you to identify and fix issues. Sometimes, making a new issue in the same way as above
is necessary to correctly reload new settings from your gallery repo.</p>
</div>
</div>
<div class="section" id="config-file-specification">
<h2>Config File Specification<a class="headerlink" href="#config-file-specification" title="Permalink to this headline">¶</a></h2>
<p>All example galleries must contain a file called <code class="docutils literal notranslate"><span class="pre">binder-gallery.yaml</span></code>.
An example file is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">name</span><span class="p">:</span> <span class="n">Example</span> <span class="n">Gallery</span>
<span class="n">description</span><span class="p">:</span> <span class="o">&gt;-</span>
  <span class="n">An</span> <span class="n">example</span> <span class="n">gallery</span> <span class="n">of</span> <span class="n">notebooks</span> <span class="n">used</span> <span class="k">for</span> <span class="n">debugging</span> <span class="n">the</span> <span class="n">Pangeo</span> <span class="n">Gallery</span>
  <span class="n">infrastructure</span><span class="o">.</span>
<span class="n">gallery_repository</span><span class="p">:</span> <span class="n">pangeo</span><span class="o">-</span><span class="n">gallery</span><span class="o">/</span><span class="n">pangeo</span><span class="o">-</span><span class="n">gallery</span>
<span class="n">binder_url</span><span class="p">:</span> <span class="s2">&quot;https://binder.pangeo.io&quot;</span>
<span class="n">binder_repo</span><span class="p">:</span> <span class="n">pangeo</span><span class="o">-</span><span class="n">gallery</span><span class="o">/</span><span class="n">default</span><span class="o">-</span><span class="n">binder</span>
<span class="n">binder_ref</span><span class="p">:</span> <span class="n">master</span>
<span class="n">binderbot_target_branch</span><span class="p">:</span> <span class="n">binderbot</span><span class="o">-</span><span class="n">built</span>
</pre></div>
</div>
<p>The fields are defined as follows.</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">binder-gallery.yaml</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>The heading used when displaying the gallery</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>A short paragraph describing the gallery contents</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gallery_repository</span></code></p></td>
<td><p>Location of the gallery website repo on GitHub.
Default <code class="docutils literal notranslate"><span class="pre">pangeo-gallery/pangeo-gallery</span></code> should probably not be changed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">binder_url</span></code></p></td>
<td><p>Url for binder service in which to run the notebooks.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">binder_repo</span></code></p></td>
<td><p>Github repository which contains the environment configuration.
(Can be the example repo itself or an external repo.)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">binder_ref</span></code></p></td>
<td><p>Branch, tag, or commit within <code class="docutils literal notranslate"><span class="pre">binder_repo</span></code> which contains the binder
environment configuration.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">binderbot_target_branch</span></code></p></td>
<td><p>Used by GitHub workflow to determine where to push the output of the
binderbot built notebooks. Default (<code class="docutils literal notranslate"><span class="pre">binderbot-built</span></code>) should probably
not be changed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Pangeo Developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>